{% extends 'base.html.twig' %}

{% block body %}

    <div class="col-lg-6">
        <div class="card card-danger col-12">
            <div class="card-header">Configuration de l'API</div>
            {{ form.formStart()|raw }}
            <div class="card-body">
                {{ form.display("privateKey", true)|raw }}

            </div>
            <div class="card-footer text-center">
                {{ form.formSubmit( "Sauvegarder" )|raw }}
            </div>
            </form>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="card card-success col-12">
            <div class="card-header">Script de configuration caisse</div>
            <div class="card-body">
                Vous devrez copier coller ce script lors de l'installation de la caisse
                <pre>{{ json }}</pre>
            </div>
            <div class="card-footer text-center">
                <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script>

                <button class="btn btn-primary copier" data-clipboard-demo
                        data-clipboard-action="copy"
                        data-clipboard-text="{{ json }}">Copier la configuration</button>
            </div>
        </div>
    </div>
    <script>
        $('document').ready(function () {
            var clipboard = new ClipboardJS('.copier');

            clipboard.on('success', function (e) {
                alert("Le script de configuration a été copié")
                console.info('Action:', e.action);
                console.info('Text:', e.text);
                console.info('Trigger:', e.trigger);
                e.clearSelection();
            });
            clipboard.on('error', function (e) {
                console.error('Action:', e.action);
                console.error('Trigger:', e.trigger);
            });

        })


    </script>

{% endblock %}